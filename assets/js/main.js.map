{"version":3,"sources":["blog-more.js","post.js","search-logic.js","search-open.js","sharing.js","switch-theme.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  if (document.querySelector('.main-page')) {\n    let items = 15;\n    const blogMore = document.querySelector('.blog-more');\n    const blogItemsLength = document.querySelectorAll('.blog-list__item').length;\n    blogMore.addEventListener('click', (e) => {\n      items += 12;\n      const arr = Array.from(document.querySelector(`.blog-list`).children);\n      const visItems = arr.slice(0, items);\n      visItems.forEach(el => el.classList.add('is-visible'));\n\n      if (visItems.length === blogItemsLength) {\n        blogMore.style.display = 'none';\n      }\n    });\n  }\n});\n\n","document.addEventListener('DOMContentLoaded', () => {\n  if (document.querySelector('.post')) {\n    const post = document.querySelector('.post');\n    const codeEl = post.querySelectorAll('pre code');\n    const postPre = post.querySelectorAll('pre');\n\n    function selectText(container) {\n      if (document.selection) { // IE\n        var range = document.body.createTextRange();\n        range.moveToElementText(container);\n        range.select();\n      } else if (window.getSelection) {\n        var range = document.createRange();\n        range.selectNode(container);\n        window.getSelection().removeAllRanges();\n        window.getSelection().addRange(range);\n      }\n    }\n\n    function copy(el) {\n      let text = el.innerText;\n      let textArea = document.createElement('textarea');\n      textArea.width = '1px';\n      textArea.height = '1px';\n      textArea.background = 'transparent';\n      textArea.value = text;\n      document.body.append(textArea);\n      textArea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textArea);\n    }\n\n    // codeEl.forEach(el => {\n    //   // el.setAttribute('tabindex', 0);\n\n    //   // el.addEventListener('click', function(e){\n    //   //   selectText(this);\n    //   // });\n\n    //   // el.addEventListener('focus', function(e){\n    //   //   selectText(this);\n    //   // });\n\n\t\t// \tel.parentNode.insertAdjacentHTML('afterbegin',`\n\t\t// \t\t<button class=\"btn-reset post__copy\" aria-label=\"Скопировать код\">\n    //       <svg>\n    //         <use xlink:href=\"/assets/img/sprite.svg#copy\"></use>\n    //       </svg>\n    //     </button>\n\t\t// \t`);\n\n    //   el.parentNode.querySelector('.post__copy').addEventListener('click', function(e){\n    //     copy(el);\n    //   });\n    // });\n\n    postPre.forEach(el => {\n      new SimpleBar(el);\n    });\n  }\n});\n","document.addEventListener('DOMContentLoaded', () => {\n  const search_input = document.querySelector('.search__input');\n  const results = document.querySelector('.search__list');\n  const dropdown = document.querySelector('.search__dropdown');\n  const form = document.querySelector('.search__form');\n\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n    document.querySelector('.search__close').focus();\n  });\n\n  const simpleBar = new SimpleBar(results);\n\n\tlet search_term = '';\n\tlet searchData;\n\n\tconst fetchData = async () => {\n\t\tsearchData = await fetch('/search-feed.json')\n\t\t\t.then(res => res.json());\n\t};\n\n\n\tconst showData = async () => {\n\t\tresults.querySelector('.simplebar-content').innerHTML = '';\n\n\t\tawait fetchData();\n\n\t\tsearchData.posts\n\t\t\t.filter(item =>\n\t\t\t\titem.title.toLowerCase().includes(search_term.toLowerCase())\n\t\t\t)\n\t\t\t.forEach(item => {\n\n\t\t\t\tif (item.title) {\n          simpleBar.recalculate();\n\t\t\t\t\tdropdown.style.display = 'block';\n\t\t\t\t\tresults.querySelector('.simplebar-content').insertAdjacentHTML('afterbegin', `\n\t\t\t\t\t\t<li class=\"search__item\">\n\t\t\t\t\t\t\t<article class=\"search-post\">\n\t\t\t\t\t\t\t\t<a href=\"${item.url}\" class=\"search-post__link\">\n\t\t\t\t\t\t\t\t\t<div class=\"search-post__image\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"search-post__category\">${item.cat}</span>\n\t\t\t\t\t\t\t\t\t\t<img src=\"${item.url}${item.cover}\" alt=\"${item.title}\">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"search-post__text\">\n\t\t\t\t\t\t\t\t\t\t<h3 class=\"search-post__title\">\n\t\t\t\t\t\t\t\t\t\t\t${item.title}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t</li>\n\n\t\t\t\t\t`);\n\t\t\t\t} else {\n\t\t\t\t\tdropdown.style.display = 'none';\n\t\t\t\t}\n\n\n\n\t\t\t});\n\t};\n\n\tsearch_input.addEventListener('keyup', e => {\n\t\tsearch_term = e.target.value;\n\t\tif (search_term.length) {\n\t\t\tshowData();\n\t\t} else {\n\t\t\tdropdown.style.display = 'none';\n\t\t}\n\n\t});\n});\n","document.addEventListener('DOMContentLoaded', () => {\n  const searchBtn = document.querySelector('.search-btn');\n  const search = document.querySelector('.search');\n  const searchCloseBtn = document.querySelector('.search__close');\n  const fixBlocks = document.querySelectorAll('.header');\n\n  let keys = {\n    ESC: 27,\n  };\n\n  search.inert = true;\n\n  let previousActiveElement;\n\n  const disableScroll = () => {\n    let pagePosition = window.scrollY;\n    document.body.classList.add('disable-scroll');\n    document.body.dataset.position = pagePosition;\n    document.body.style.top = -pagePosition + 'px';\n  }\n\n  const enableScroll = () => {\n    let pagePosition = parseInt(document.body.dataset.position, 10);\n    document.body.style.top = 'auto';\n    document.body.classList.remove('disable-scroll');\n    window.scroll({\n      top: pagePosition,\n      left: 0\n    });\n    document.body.removeAttribute('data-position');\n  }\n\n  const lockPadding = () => {\n    let paddingOffset = window.innerWidth - document.body.offsetWidth + 'px';\n    if (fixBlocks) {\n      fixBlocks.forEach((el) => {\n        el.style.paddingRight = paddingOffset;\n      });\n    }\n    document.body.style.paddingRight = paddingOffset;\n  }\n\n  const unlockPadding = () => {\n    if (fixBlocks) {\n      fixBlocks.forEach((el) => {\n        el.style.paddingRight = '0px';\n      });\n    }\n    document.body.style.paddingRight = '0px';\n  }\n\n  const openSearch = () => {\n    search.classList.add('search--active');\n    previousActiveElement = document.activeElement;\n    lockPadding();\n    disableScroll();\n\n    Array.from(document.body.children).forEach((child) => {\n      if (child !== search) {\n        child.inert = true;\n      }\n    });\n\n    search.inert = false;\n\n    setTimeout(() => {\n      searchCloseBtn.focus();\n    }, 100);\n\n    document.addEventListener('keydown', (e) => {\n      console.log(e.keyCode);\n\n      if (e.keyCode == keys.ESC) {\n        closeSearch();\n      }\n    });\n  };\n\n  const closeSearch = () => {\n    search.classList.remove('search--active');\n    unlockPadding();\n    enableScroll();\n\n    Array.from(document.body.children).forEach((child) => {\n      if (child !== search) {\n        child.inert = false;\n      }\n    });\n\n    search.inert = true;\n\n    const search_input = document.querySelector('.search__input');\n    search_input.value = '';\n\n    setTimeout(() => {\n      previousActiveElement.focus();\n    }, 300);\n  };\n\n  searchBtn.addEventListener('click', () => {\n    openSearch();\n  });\n\n  searchCloseBtn.addEventListener('click', () => {\n    closeSearch();\n  });\n});\n\n\n","Array.from(document.querySelectorAll('[data-social]')).forEach((link) => {\n  link.addEventListener('click', () => {\n    let url = location.origin + location.pathname;\n\n    //url += `/assets/share.php?page=${encodeURIComponent(page)}`;\n\n    switch (event.currentTarget.dataset.social) {\n      case 'facebook':\n        Share.facebook(url);\n        break;\n\n      case 'vk':\n        Share.vk(url);\n        break;\n\n      case 'twitter':\n        Share.twitter(url);\n        break;\n    }\n  });\n});\n","document.addEventListener('DOMContentLoaded', () => {\n  const root = document.documentElement;\n  const switchBtn = document.querySelector('.theme-switch');\n  const switchBtnIcons = switchBtn.querySelectorAll('.theme-switch__icon');\n\n  if (localStorage.getItem('theme') === null) {\n    localStorage.setItem('theme', 'dark');\n  }\n\n  const switchIcon = (theme) => {\n    if (switchBtnIcons) {\n      switchBtnIcons.forEach(el => el.classList.remove('theme-switch__icon--active'));\n      if (theme === 'light') {\n        switchBtn.querySelector('.dark').classList.add('theme-switch__icon--active');\n      }\n      if (theme === 'dark') {\n        switchBtn.querySelector('.light').classList.add('theme-switch__icon--active');\n      }\n    }\n  };\n\n  const toggleTheme = (theme) => {\n    switchIcon(theme);\n\n    if (localStorage.getItem('theme') === 'light') {\n      root.style.setProperty('--scheme', 'light');\n      document.documentElement.classList.add('light-theme');\n      localStorage.setItem('theme', 'light');\n    }\n    if (localStorage.getItem('theme') === 'dark') {\n      root.style.setProperty('--scheme', 'dark');\n      document.documentElement.classList.remove('light-theme');\n      localStorage.setItem('theme', 'dark');\n    }\n  };\n\n  toggleTheme(localStorage.getItem('theme'));\n\n  switchBtn.addEventListener('click', () => {\n    let scheme = localStorage.getItem('theme');\n    console.log(scheme)\n    if (scheme === 'dark') {\n      localStorage.setItem('theme', 'light');\n      toggleTheme('light');\n    } else if (scheme === 'light') {\n      localStorage.setItem('theme', 'dark');\n      toggleTheme('dark');\n    }\n  });\n});\n","/**\n  * название функции\n  *\n  * @param {number} first - первое число\n  * @returns {number}\n  */\n"]}