document.addEventListener("DOMContentLoaded",()=>{if(document.querySelector(".main-page")){let t=15;const e=document.querySelector(".blog-more"),o=document.querySelectorAll(".blog-list__item").length;e.addEventListener("click",c=>{t+=12;const n=Array.from(document.querySelector(".blog-list").children).slice(0,t);n.forEach(t=>t.classList.add("is-visible")),n.length===o&&(e.style.display="none")})}}),document.addEventListener("DOMContentLoaded",()=>{if(document.querySelector(".post")){const t=document.querySelector(".post"),e=t.querySelectorAll("pre code"),o=t.querySelectorAll("pre");e.forEach(t=>{t.parentNode.insertAdjacentHTML("afterbegin",'\n\t\t\t\t<button class="btn-reset post__copy" aria-label="Скопировать код">\n          <svg>\n            <use xlink:href="/assets/img/sprite.svg#copy"></use>\n          </svg>\n        </button>\n\t\t\t'),t.parentNode.querySelector(".post__copy").addEventListener("click",(function(e){!function(t){let e=t.innerText,o=document.createElement("textarea");o.width="1px",o.height="1px",o.background="transparent",o.value=e,document.body.append(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}(t)}))}),o.forEach(t=>{new SimpleBar(t)})}}),document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".search__input"),e=document.querySelector(".search__list"),o=document.querySelector(".search__dropdown");document.querySelector(".search__form").addEventListener("submit",t=>{t.preventDefault(),document.querySelector(".search__close").focus()});const c=new SimpleBar(e);let n,r="";const a=async()=>{e.querySelector(".simplebar-content").innerHTML="",await(async()=>{n=await fetch("/search-feed.json").then(t=>t.json())})(),n.posts.filter(t=>t.title.toLowerCase().includes(r.toLowerCase())).forEach(t=>{t.title?(c.recalculate(),o.style.display="block",e.querySelector(".simplebar-content").insertAdjacentHTML("afterbegin",`\n\t\t\t\t\t\t<li class="search__item">\n\t\t\t\t\t\t\t<article class="search-post">\n\t\t\t\t\t\t\t\t<a href="${t.url}" class="search-post__link">\n\t\t\t\t\t\t\t\t\t<div class="search-post__image">\n\t\t\t\t\t\t\t\t\t\t<span class="search-post__category">${t.cat}</span>\n\t\t\t\t\t\t\t\t\t\t<img src="${t.url}${t.cover}" alt="${t.title}">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="search-post__text">\n\t\t\t\t\t\t\t\t\t\t<h3 class="search-post__title">\n\t\t\t\t\t\t\t\t\t\t\t${t.title}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t</li>\n\n\t\t\t\t\t`)):o.style.display="none"})};t.addEventListener("keyup",t=>{r=t.target.value,r.length?a():o.style.display="none"})}),document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".search-btn"),e=document.querySelector(".search"),o=document.querySelector(".search__close"),c=document.querySelectorAll(".header");let n,r=27;e.inert=!0;const a=()=>{e.classList.add("search--active"),n=document.activeElement,(()=>{let t=window.innerWidth-document.body.offsetWidth+"px";c&&c.forEach(e=>{e.style.paddingRight=t}),document.body.style.paddingRight=t})(),(()=>{let t=window.scrollY;document.body.classList.add("disable-scroll"),document.body.dataset.position=t,document.body.style.top=-t+"px"})(),Array.from(document.body.children).forEach(t=>{t!==e&&(t.inert=!0)}),e.inert=!1,setTimeout(()=>{o.focus()},100),document.addEventListener("keydown",t=>{console.log(t.keyCode),t.keyCode==r&&s()})},s=()=>{e.classList.remove("search--active"),c&&c.forEach(t=>{t.style.paddingRight="0px"}),document.body.style.paddingRight="0px",(()=>{let t=parseInt(document.body.dataset.position,10);document.body.style.top="auto",document.body.classList.remove("disable-scroll"),window.scroll({top:t,left:0}),document.body.removeAttribute("data-position")})(),Array.from(document.body.children).forEach(t=>{t!==e&&(t.inert=!1)}),e.inert=!0;document.querySelector(".search__input").value="",setTimeout(()=>{n.focus()},300)};t.addEventListener("click",()=>{a()}),o.addEventListener("click",()=>{s()})}),Array.from(document.querySelectorAll("[data-social]")).forEach(t=>{t.addEventListener("click",()=>{let t=location.origin+location.pathname;switch(event.currentTarget.dataset.social){case"facebook":Share.facebook(t);break;case"vk":Share.vk(t);break;case"twitter":Share.twitter(t)}})}),document.addEventListener("DOMContentLoaded",()=>{const t=document.documentElement,e=document.querySelector(".theme-switch"),o=e.querySelectorAll(".theme-switch__icon");null===localStorage.getItem("theme")&&localStorage.setItem("theme","dark");const c=c=>{(t=>{o&&(o.forEach(t=>t.classList.remove("theme-switch__icon--active")),"light"===t&&e.querySelector(".dark").classList.add("theme-switch__icon--active"),"dark"===t&&e.querySelector(".light").classList.add("theme-switch__icon--active"))})(c),"light"===localStorage.getItem("theme")&&(t.style.setProperty("--scheme","light"),document.documentElement.classList.add("light-theme"),localStorage.setItem("theme","light")),"dark"===localStorage.getItem("theme")&&(t.style.setProperty("--scheme","dark"),document.documentElement.classList.remove("light-theme"),localStorage.setItem("theme","dark"))};c(localStorage.getItem("theme")),e.addEventListener("click",()=>{let t=localStorage.getItem("theme");console.log(t),"dark"===t?(localStorage.setItem("theme","light"),c("light")):"light"===t&&(localStorage.setItem("theme","dark"),c("dark"))})});